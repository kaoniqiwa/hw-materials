<div class="profile-details vertical-layout">
  <div class="profile-details-header vertical-header">
    <div class="hw-simple-title">厢房档案</div>
  </div>
  <div class="profiles-details-body vertical-main">
    <ng-template [ngTemplateOutlet]="templateExpression"></ng-template>
  </div>
</div>

<ng-template #stepperTemp>
  <mat-stepper
    #stepper
    linear
    [selectedIndex]="selectedIndex"
    (selectionChange)="selectStepperChange($event)"
  >
    <ng-container *ngFor="let label of labelData; let i = index; let c = count">
      <mat-step [completed]="!!completedArr[i]">
        <ng-template matStepLabel>{{ label.Name }} </ng-template>
        <ng-template matStepContent>
          <ng-template
            [ngTemplateOutlet]="getTemplate(i)"
            [ngTemplateOutletContext]="{ index: i, $implicit: 'hello' }"
          ></ng-template>
        </ng-template>
      </mat-step>
    </ng-container> </mat-stepper
></ng-template>

<ng-template #tabTemp>
  <mat-tab-group
    [selectedIndex]="selectedIndex"
    (selectedTabChange)="selectedTabChange($event)"
  >
    <ng-container *ngFor="let label of labelData; let i = index; let c = count"
      ><mat-tab [disabled]="!completedArr[i]">
        <ng-template mat-tab-label> {{ label.Name }} </ng-template>
        <ng-template matTabContent>
          <ng-template
            [ngTemplateOutlet]="getTemplate(i)"
            [ngTemplateOutletContext]="{ index: i, $implicit: 'hello' }"
          ></ng-template
        ></ng-template>
      </mat-tab>
    </ng-container>
  </mat-tab-group>
</ng-template>

<ng-template #expansionTemp>
  <mat-accordion>
    <ng-container *ngFor="let label of labelData; let i = index; let c = count">
      <mat-expansion-panel hideToggle (opened)="opened(i)">
        <mat-expansion-panel-header>
          <mat-panel-title>
            <div
              [style.color]="i + 1 | garbage_station_profile_state_color_pipe"
            >
              {{ label.Name }}
            </div>
          </mat-panel-title>
        </mat-expansion-panel-header>
        <ng-template matExpansionPanelContent>
          <ng-template
            [ngTemplateOutlet]="getTemplate(i)"
            [ngTemplateOutletContext]="{ index: i, $implicit: 'hello' }"
          ></ng-template>
        </ng-template>
      </mat-expansion-panel>
    </ng-container>
  </mat-accordion>
</ng-template>

<ng-template #step1 #step let-value let-index="index">
  <garbage-profile-details-form1
    *ngIf="index == selectedIndex"
    [formId]="formId"
    [profileState]="profileState"
    [stepIndex]="index"
    [formState]="formState"
    (next)="nextEvent($event)"
    (close)="closeEvent()"
    (formStatus)="formStatus($event, index)"
  ></garbage-profile-details-form1>
</ng-template>
<ng-template #step2 #step let-value let-index="index">
  <garbage-profile-details-form2
    *ngIf="index == selectedIndex"
    [formId]="formId"
    [profileState]="profileState"
    [stepIndex]="index"
    [formState]="formState"
    (next)="nextEvent($event)"
    (close)="closeEvent()"
    (previous)="previousEvent()"
    (formStatus)="formStatus($event, index)"
    (recordEvent)="clickRecord($event)"
  ></garbage-profile-details-form2>
</ng-template>
<ng-template #step3 #step let-value let-index="index"
  ><garbage-profile-details-form3
    *ngIf="index == selectedIndex"
    [formId]="formId"
    [profileState]="profileState"
    [stepIndex]="index"
    [formState]="formState"
    (next)="nextEvent($event)"
    (close)="closeEvent()"
    (previous)="previousEvent()"
    (formStatus)="formStatus($event, index)"
  ></garbage-profile-details-form3>
</ng-template>
<ng-template #step4 #step let-value let-index="index">
  <garbage-profile-details-form4
    *ngIf="index == selectedIndex"
    [formId]="formId"
    [profileState]="profileState"
    [stepIndex]="index"
    [formState]="formState"
    (next)="nextEvent($event)"
    (close)="closeEvent()"
    (previous)="previousEvent()"
    (formStatus)="formStatus($event, index)"
  ></garbage-profile-details-form4>
</ng-template>
<ng-template #step5 #step let-value let-index="index">
  <garbage-profile-details-form5
    *ngIf="index == selectedIndex"
    [formId]="formId"
    [profileState]="profileState"
    [formState]="formState"
    [stepIndex]="index"
    (next)="nextEvent($event)"
    (close)="closeEvent()"
    (previous)="previousEvent()"
    (formStatus)="formStatus($event, index)"
  ></garbage-profile-details-form5>
</ng-template>
<ng-template #step6 #step let-value let-index="index">
  <garbage-profile-details-form6
    *ngIf="index == selectedIndex"
    [formId]="formId"
    [profileState]="profileState"
    [formState]="formState"
    [stepIndex]="index"
    (next)="nextEvent($event)"
    (close)="closeEvent()"
    (previous)="previousEvent()"
    (formStatus)="formStatus($event, index)"
  ></garbage-profile-details-form6>
</ng-template>
